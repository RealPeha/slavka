function ownKeys(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)),n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}}function _arrayWithHoles(t){if(Array.isArray(t))return t}!function(){function h(e,t,r,n){var o=3<arguments.length&&void 0!==n?n:{};t.forEach(function(t){return e.addEventListener(t,r,o)})}function l(e,t,r){t.forEach(function(t){return e.removeEventListener(t,r)})}function f(t){var e=t.changedTouches,r=t.pageX,t=t.pageY;if(e){e=_slicedToArray(e,1)[0];return{pageX:e.pageX,pageY:e.pageY}}return{pageX:r,pageY:t}}function y(t,e){var r,n=document.createElement("div");return e&&(r=n.classList).add.apply(r,_toConsumableArray(e)),t.appendChild(n),n}function r(e){var t,r,n,o,i,a,c,u,l,f,d,s,p;g.includes(e)||(g.push(e),t=void 0===(l=(s=b.find(function(t){return t.id===e})||{title:"404",content:"Not Found"}).title)?"":l,r=void 0===(f=s.content)?"":f,n=s.items,o=s.itemsSort,i=s.styles,d=s.features,a=_objectSpread(_objectSpread({},{resizable:!0,draggable:!0,fullscreen:!0,title:!0}),d),c=y(m,["window","resizable","draggable","fullscreen"]),u=y(c,["title-wrapper","drag-target"]),l=y(c,["content"]),f=function(t){t.preventDefault(),v(c)({opacity:0}),setTimeout(function(){c.remove(),g.splice(g.indexOf(e),1)},200)},a.title?(s=y(u,["title","really-cool-border"]),d=y(s),s=y(u,["window-close"]),h(s,["mousedown"],f),d.innerText=t):h(u,["contextmenu"],f),l.innerHTML=r,n&&n.length&&(p=y(l,["items-wrapper"]),o&&n.sort(o),n.forEach(function(t){var e,r,n,o,i,n=(e=p,n=(r=t).title,o=void 0===n?"":n,i=r.windowId,n=r.type,r=r.href,n=y(e,["item",n]),y(n,["item-content"]).innerText=o,i&&(n.dataset.windowId=i),r&&(n.dataset.href=r),n);t.href?T([n]):t.windowId&&j([n])})),a.draggable&&A([c]),a.resizable&&S([c]),a.fullscreen&&_([c]),O([c]),v(c)(_objectSpread(_objectSpread({},i||{}),{},{zIndex:++w,opacity:1})))}function e(t,o){return t.map(function(t){return e=t,r=o,n=document.createElement("div"),(t=n.classList).add.apply(t,["resizer"].concat(_toConsumableArray(Array.isArray(e)?e:e.split(" ")))),r.appendChild(n),n;var e,r,n})}var m=document.querySelector(".content-wrapper"),g=[],b=[{id:"mine",title:"Minecraft",items:[{type:"folder",title:"Бесплатные моды для майнкрафта",windowId:"test"},{type:"file",title:"Лучшая в мире игра",href:"/mine"}],itemsSort:function(t,e){return t.type<e.type}},{id:"toe",title:"Wantid",content:"\n                <h1>Да</h1>\n                <p>Согласен</p>\n            ".trim(),styles:{width:"auto",height:"auto"},features:{resizable:!1,fullscreen:!1,title:!1}}],w=1,u=!1,d=744<window.innerWidth,v=function(r){return function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Object.entries(t).forEach(function(t){var e=_slicedToArray(t,2),t=e[0],e=e[1];r.style[t]=e.toString()})}},s=v(document.body),A=function(t){return t.forEach(function(a){var t=a.querySelectorAll(".drag-target")||[a],c=v(a);a!==t[0]&&h(a,["mousedown","touchstart"],function(){c({zIndex:++w})}),t.forEach(function(i){h(i,["mousedown","touchstart"],function(t){var r,n,o,e;t.target.classList.contains("drag-target")&&(r=f(t),s({userSelect:"none"}),c({zIndex:++w}),t=window.getComputedStyle(a,null),n=parseInt(t.getPropertyValue("left"))||0,o=parseInt(t.getPropertyValue("top"))||0,e=function(t){u=!0;var e=f(t),t=e.pageX,e=e.pageY;c({left:n+t-r.pageX+"px",top:o+e-r.pageY+"px"})},h(document,["mousemove","touchmove"],e),h(document,["mouseup","touchend"],function(){l(document,["mousemove","touchmove"],e),s({userSelect:"auto"}),u=!1},{once:!0}),i.ondragstart=function(){return!1})})})})},S=function(t){return t.forEach(function(o){var i=v(o),t=document.createElement("div");o.appendChild(t);var t=e(["top","right","bottom","left","top left","top right","bottom left","bottom right"],t),a={},c={top:0,left:0},u={};t.forEach(function(t){function e(t){n.contains("top")&&function(t){t=f(t).pageY;i({height:u.height+(a.pageY-t)+"px"}),i(d?{top:t+"px"}:{top:c.top+(t-a.pageY)+"px"})}(t),n.contains("right")&&function(t){t=f(t).pageX;i({width:t-u.left+"px"})}(t),n.contains("bottom")&&function(t){t=f(t).pageY;i({height:t-u.top+"px"})}(t),n.contains("left")&&function(t){t=f(t).pageX;i({width:u.width+(a.pageX-t)+"px",left:t+"px"})}(t)}function r(){l(window,["mousemove","touchmove"],e)}var n=t.classList;h(t,["mousedown","touchstart"],function(t){a=f(t),u=o.getBoundingClientRect(),c={top:o.offsetTop,left:o.offsetLeft},h(window,["mousemove","touchmove"],e),h(window,["mouseup","touchend"],r)})})})},_=function(t){return t.forEach(function(r){var n=v(r),o=0,i=!1,a={};h(r,["mousedown"],function(){var t,e;2<=++o&&(n({transition:"left .1s, top .1s, width .1s, height .1s"}),i?(i=!1,n({width:"".concat(a.width,"px"),height:"".concat(a.height,"px"),left:"".concat(a.left,"px"),top:"".concat(a.top,"px")})):(t=(e=r.getBoundingClientRect()).width,e=e.height,a={width:t,height:e,top:r.offsetTop,left:r.offsetLeft},i=!0,n({width:"100%",height:"100%",left:0,top:0})),setTimeout(function(){return n({transition:"none"})},100)),setTimeout(function(){return o=0},200)})})},T=function(t){return t.forEach(function(t){var e=t.dataset.href;e&&h(t,["mouseup","touchend"],function(){u||(window.location.href=e)})})},j=function(t){return t.forEach(function(t){var e=t.dataset.windowId;e&&h(t,["mouseup","touchend"],function(){u||r(e)})})},O=function(t){return t.forEach(function(t){t=v(t);t(d?{top:"calc((100% - 70%) / 2)",left:"calc((100% - 70%) / 2)"}:{top:"calc((100% - 70%) / 2)",left:"calc((100% - 90%) / 2)",width:"90%"})})};A(document.querySelectorAll(".draggable")),S(document.querySelectorAll(".resizable")),_(document.querySelectorAll(".fullscreen")),O(document.querySelectorAll(".fullscreen")),T(document.querySelectorAll("[data-href]")),j(document.querySelectorAll("[data-window-id]"))}();