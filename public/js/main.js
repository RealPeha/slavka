function ownKeys(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var zIndex=1,isDragging=!1,isLargeScreen=744<window.innerWidth,windowsContainer=document.querySelector(".content-wrapper"),openedWindows=[],windows=[{id:"mine",title:"Minecraft",items:[{type:"folder",title:"Test",windowId:"test"},{type:"file",title:"File",href:"/mine"}],itemsSort:function(e,t){return e.type<t.type}},{id:"toe",title:"Wantid",content:"\n            Согласен\n        ".trim()}],addEventListeners=function(t,e,n,r){var o=3<arguments.length&&void 0!==r?r:{};e.forEach(function(e){return t.addEventListener(e,n,o)})},removeEventListeners=function(t,e,n){e.forEach(function(e){return t.removeEventListener(e,n)})},getPageCoords=function(e){var t=e.changedTouches,n=e.pageX,e=e.pageY;if(t){t=_slicedToArray(t,1)[0];return{pageX:t.pageX,pageY:t.pageY}}return{pageX:n,pageY:e}},createDiv=function(e,t){var n,r=document.createElement("div");return t&&(n=r.classList).add.apply(n,_toConsumableArray(t)),e.appendChild(r),r},createItem=function(e,t){e=createDiv(e,["item",t.type]);return createDiv(e,["item-content"]).innerText=t.title||"",t.windowId&&(e.dataset.windowId=t.windowId),t.href&&(e.dataset.href=t.href),e},createWindow=function(t){var e,n,r,o,i,a;openedWindows.includes(t)||(openedWindows.push(t),e=windows.find(function(e){return e.id===t})||{title:"404",content:"Not Found"},n=createDiv(windowsContainer,["window","resizable","draggable","fullscreen"]),r=createDiv(n,["title-wrapper","drag-target"]),a=createDiv(n,["content"]),o=createDiv(r,["title","really-cool-border"]),o=createDiv(o),createDiv(r,["window-close"]).addEventListener("mousedown",function(e){n.remove(),openedWindows.splice(openedWindows.indexOf(t),1)}),o.innerText=e.title||"",a.innerText=e.content||"",e.items&&e.items.length&&(i=createDiv(a,["items-wrapper"]),e.itemsSort&&e.items.sort(e.itemsSort),e.items.forEach(function(e){var t=createItem(i,e);e.href?makeLink([t]):e.windowId&&makeCanOpenWindow([t])})),makeDraggable([n]),makeResizable([n]),makeFullscreen([n]),(a=applyStyles(n))({zIndex:++zIndex}),e.sizes&&a(_objectSpread(_objectSpread({width:e.sizes.width,height:e.sizes.height},e.sizes.top&&{top:e.sizes.top}),e.sizes.left&&{left:e.sizes.left})))},applyStyles=function(n){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Object.entries(e).forEach(function(e){var t=_slicedToArray(e,2),e=t[0],t=t[1];n.style[e]=t.toString()})}},setBodyStyles=applyStyles(document.body),makeDraggable=function(e){e.forEach(function(a){var e=a.querySelectorAll(".drag-target")||[a],s=applyStyles(a);e.forEach(function(i){addEventListeners(i,["mousedown","touchstart"],function(e){var n,r,o,t;e.target.classList.contains("drag-target")&&(n=getPageCoords(e),setBodyStyles({userSelect:"none"}),s({zIndex:++zIndex}),e=window.getComputedStyle(a,null),r=parseInt(e.getPropertyValue("left"))||0,o=parseInt(e.getPropertyValue("top"))||0,t=function(e){isDragging=!0;var t=getPageCoords(e),e=t.pageX,t=t.pageY;s({left:r+e-n.pageX+"px",top:o+t-n.pageY+"px"})},addEventListeners(document,["mousemove","touchmove"],t),addEventListeners(document,["mouseup","touchend"],function(){removeEventListeners(document,["mousemove","touchmove"],t),setBodyStyles({userSelect:"auto"}),isDragging=!1},{once:!0}),i.ondragstart=function(){return!1})})})})},createResizer=function(e,t){var n,r=document.createElement("div");return(n=r.classList).add.apply(n,["resizer"].concat(_toConsumableArray(Array.isArray(e)?e:e.split(" ")))),t.appendChild(r),r},createResizers=function(e,t){return e.map(function(e){return createResizer(e,t)})},makeResizable=function(e){e.forEach(function(o){var i=applyStyles(o),e=document.createElement("div");o.appendChild(e);var e=createResizers(["top","right","bottom","left","top left","top right","bottom left","bottom right"],e),a={},s={top:0,left:0},c={};e.forEach(function(e){function t(e){r.contains("top")&&function(e){e=getPageCoords(e).pageY;i({height:c.height+(a.pageY-e)+"px"}),i(isLargeScreen?{top:e+"px"}:{top:s.top+(e-a.pageY)+"px"})}(e),r.contains("right")&&function(e){e=getPageCoords(e).pageX;i({width:e-c.left+"px"})}(e),r.contains("bottom")&&function(e){e=getPageCoords(e).pageY;i({height:e-c.top+"px"})}(e),r.contains("left")&&function(e){e=getPageCoords(e).pageX;i({width:c.width+(a.pageX-e)+"px",left:e+"px"})}(e)}function n(){removeEventListeners(window,["mousemove","touchmove"],t)}var r=e.classList;addEventListeners(e,["mousedown","touchstart"],function(e){a=getPageCoords(e),c=o.getBoundingClientRect(),s={top:o.offsetTop,left:o.offsetLeft},addEventListeners(window,["mousemove","touchmove"],t),addEventListeners(window,["mouseup","touchend"],n)})})})},makeFullscreen=function(e){var t={top:"calc((100% - 70%) / 2)",left:"calc((100% - 70%) / 2)"};e.forEach(function(n){var r=applyStyles(n);r(_objectSpread(_objectSpread({},t),{},isLargeScreen?{width:"".concat(n.getBoundingClientRect().width,"px")}:{width:"90%",margin:0}));var o=0,i=!1,a={};addEventListeners(n,["mousedown"],function(){var e,t;2<=++o&&(r({transition:"left .1s, top .1s, width .1s, height .1s"}),i?(i=!1,r({width:"".concat(a.width,"px"),height:"".concat(a.height,"px"),left:"".concat(a.left,"px"),top:"".concat(a.top,"px")})):(e=(t=n.getBoundingClientRect()).width,t=t.height,a={width:e,height:t,top:n.offsetTop,left:n.offsetLeft},i=!0,r({width:"100%",height:"100%",left:0,top:0})),setTimeout(function(){return r({transition:"none"})},100)),setTimeout(function(){return o=0},200)})})},makeLink=function(e){e.forEach(function(e){var t=e.dataset.href;t&&addEventListeners(e,["mouseup","touchend"],function(){isDragging||(window.location.href=t)})})},makeCanOpenWindow=function(e){e.forEach(function(e){var t=e.dataset.windowId;t&&addEventListeners(e,["mouseup","touchend"],function(){isDragging||createWindow(t)})})},draggableElements=document.querySelectorAll(".draggable"),resizableElements=document.querySelectorAll(".resizable"),fullscreenElements=document.querySelectorAll(".fullscreen"),linkElements=document.querySelectorAll("[data-href]"),createWindowElements=document.querySelectorAll("[data-window-id]");makeDraggable(draggableElements),makeResizable(resizableElements),makeFullscreen(fullscreenElements),makeLink(linkElements),makeCanOpenWindow(createWindowElements);