function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function e(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var c=document.querySelector(".content-wrapper"),u=[],f=[{id:"mine",title:"Minecraft",items:[{type:"folder",title:"Бесплатные моды для майнкрафта",windowId:"test"},{type:"file",title:"Лучшая в мире игра",href:"/mine"}],itemsSort:function(t,e){return t.type<e.type}},{id:"toe",title:"Wantid",content:"\n                <h1>Да</h1>\n                <p>Согласен</p>\n            ".trim(),styles:{width:"auto",height:"auto"},features:{resizable:!1,fullscreen:!1,title:!1}}],l=1,d=!1,p=window.innerWidth>744,s=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.forEach((function(e){return t.addEventListener(e,n,r)}))},h=function(t,e,n){e.forEach((function(e){return t.removeEventListener(e,n)}))},m=function(t){var e=t.changedTouches,n=t.pageX,r=t.pageY;if(e){var i=o(e,1)[0];return{pageX:i.pageX,pageY:i.pageY}}return{pageX:n,pageY:r}},g=function(t,e){var n,o=document.createElement("div");e&&(n=o.classList).add.apply(n,r(e));return t.appendChild(o),o},v=function(t){if(!u.includes(t)){u.push(t);var n=f.find((function(e){return e.id===t}))||{title:"404",content:"Not Found"},r=n.title,o=void 0===r?"":r,i=n.content,a=void 0===i?"":i,d=n.items,p=n.itemsSort,h=n.styles,m=n.features,v=e(e({},{resizable:!0,draggable:!0,fullscreen:!0,title:!0}),m),y=g(c,["window","resizable","draggable","fullscreen"]),b=g(y,["title-wrapper","drag-target"]),I=g(y,["content"]),P=function(e){e.preventDefault(),w(y)({opacity:0}),setTimeout((function(){y.remove(),u.splice(u.indexOf(t),1)}),200)};if(v.title){var T=g(b,["title","really-cool-border"]),Y=g(T),z=g(b,["window-close"]);s(z,["mousedown"],P),Y.innerText=o}else s(b,["contextmenu"],P);if(I.innerHTML=a,d&&d.length){var L=g(I,["items-wrapper"]);p&&d.sort(p),d.forEach((function(t){var e=function(t,e){var n=e.title,r=void 0===n?"":n,o=e.windowId,i=e.type,a=e.href,c=g(t,["item",i]);return g(c,["item-content"]).innerText=r,o&&(c.dataset.windowId=o),a&&(c.dataset.href=a),c}(L,t);t.href?E([e]):t.windowId&&j([e])}))}v.draggable&&S([y]),v.resizable&&O([y]),v.fullscreen&&x([y]),A([y]),w(y)(e(e({},h||{}),{},{zIndex:++l,opacity:1}))}},y=function(t,e){return t.map((function(t){return function(t,e){var n,o=document.createElement("div");return(n=o.classList).add.apply(n,["resizer"].concat(r(Array.isArray(t)?t:t.split(" ")))),e.appendChild(o),o}(t,e)}))},w=function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.entries(e).forEach((function(e){var n=o(e,2),r=n[0],i=n[1];t.style[r]=i.toString()}))}},b=w(document.body),S=function(t){return t.forEach((function(t){var e=t.querySelectorAll(".drag-target")||[t],n=w(t);t!==e[0]&&s(t,["mousedown","touchstart"],(function(){n({zIndex:++l})})),e.forEach((function(e){s(e,["mousedown","touchstart"],(function(r){if(r.target.classList.contains("drag-target")){var o=m(r);b({userSelect:"none"}),n({zIndex:++l});var i=window.getComputedStyle(t,null),a=parseInt(i.getPropertyValue("left"))||0,c=parseInt(i.getPropertyValue("top"))||0,u=function(t){d=!0;var e=m(t),r=e.pageX,i=e.pageY;n({left:a+r-o.pageX+"px",top:c+i-o.pageY+"px"})};s(document,["mousemove","touchmove"],u),s(document,["mouseup","touchend"],(function(){h(document,["mousemove","touchmove"],u),b({userSelect:"auto"}),d=!1}),{once:!0}),e.ondragstart=function(){return!1}}}))}))}))},O=function(t){return t.forEach((function(t){var e=w(t),n=document.createElement("div");t.appendChild(n);var r=y(["top","right","bottom","left","top left","top right","bottom left","bottom right"],n),o={},i={top:0,left:0},a={};r.forEach((function(n){var r=n.classList,c=function(t){r.contains("top")&&function(t){var n=m(t).pageY;e({height:a.height+(o.pageY-n)+"px"}),e(p?{top:n+"px"}:{top:i.top+(n-o.pageY)+"px"})}(t),r.contains("right")&&function(t){var n=m(t).pageX;e({width:n-a.left+"px"})}(t),r.contains("bottom")&&function(t){var n=m(t).pageY;e({height:n-a.top+"px"})}(t),r.contains("left")&&function(t){var n=m(t).pageX;e({width:a.width+(o.pageX-n)+"px",left:n+"px"})}(t)},u=function(){h(window,["mousemove","touchmove"],c)};s(n,["mousedown","touchstart"],(function(e){o=m(e),a=t.getBoundingClientRect(),i={top:t.offsetTop,left:t.offsetLeft},s(window,["mousemove","touchmove"],c),s(window,["mouseup","touchend"],u)}))}))}))},x=function(t){return t.forEach((function(t){var e=w(t),n=0,r=!1,o={};s(t,["mousedown"],(function(){if(++n>=2){if(e({transition:"left .1s, top .1s, width .1s, height .1s"}),r)r=!1,e({width:"".concat(o.width,"px"),height:"".concat(o.height,"px"),left:"".concat(o.left,"px"),top:"".concat(o.top,"px")});else{var i=t.getBoundingClientRect(),a=i.width,c=i.height;o={width:a,height:c,top:t.offsetTop,left:t.offsetLeft},r=!0,e({width:"100%",height:"100%",left:0,top:0})}setTimeout((function(){return e({transition:"none"})}),100)}setTimeout((function(){return n=0}),200)}))}))},E=function(t){return t.forEach((function(t){var e=t.dataset.href;e&&s(t,["mouseup","touchend"],(function(){d||(window.location.href=e)}))}))},j=function(t){return t.forEach((function(t){var e=t.dataset.windowId;e&&s(t,["mouseup","touchend"],(function(){d||v(e)}))}))},A=function(t){return t.forEach((function(t){var e=w(t);e(p?{top:"calc((100% - 70%) / 2)",left:"calc((100% - 70%) / 2)"}:{top:"calc((100% - 70%) / 2)",left:"calc((100% - 90%) / 2)",width:"90%"})}))};S(document.querySelectorAll(".draggable")),O(document.querySelectorAll(".resizable")),x(document.querySelectorAll(".fullscreen")),A(document.querySelectorAll(".fullscreen")),E(document.querySelectorAll("[data-href]")),j(document.querySelectorAll("[data-window-id]"));