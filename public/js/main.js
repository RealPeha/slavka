function ownKeys(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}!function(){function f(e,t,n,r){var o=3<arguments.length&&void 0!==r?r:{};t.forEach(function(t){return e.addEventListener(t,n,o)})}function l(e,t,n){t.forEach(function(t){return e.removeEventListener(t,n)})}function d(t){var e=t.changedTouches,n=t.pageX,t=t.pageY;if(e){e=_slicedToArray(e,1)[0];return{pageX:e.pageX,pageY:e.pageY}}return{pageX:n,pageY:t}}function p(t,e){var n,r=document.createElement("div");return e&&(n=r.classList).add.apply(n,_toConsumableArray(e)),t.appendChild(r),r}function n(e){var t,n,r,o,i,a,c,u,l;h.includes(e)||(h.push(e),c=y.find(function(t){return t.id===e})||{title:"404",content:"Not Found"},t=p(s,["window","resizable","draggable","fullscreen"]),a=p(t,["title-wrapper","drag-target"]),n=p(t,["content"]),o=p(a,["title","really-cool-border"]),r=p(o),i=p(a,["window-close"]),f(i,["mousedown"],function(){w(t)({opacity:0}),setTimeout(function(){t.remove(),h.splice(h.indexOf(e),1)},200)}),o=void 0===(l=c.title)?"":l,i=void 0===(a=c.content)?"":a,l=c.items,a=c.itemsSort,c=c.sizes,r.innerText=o,n.innerHTML=i,l&&l.length&&(u=p(n,["items-wrapper"]),a&&l.sort(a),l.forEach(function(t){var e,n,r,o,i,r=(e=u,r=(n=t).title,o=void 0===r?"":r,i=n.windowId,r=n.type,n=n.href,r=p(e,["item",r]),p(r,["item-content"]).innerText=o,i&&(r.dataset.windowId=i),n&&(r.dataset.href=n),r);t.href?S([r]):t.windowId&&T([r])})),v([t]),A([t]),_([t]),(l=w(t))({zIndex:++m,opacity:1}),c&&l(_objectSpread(_objectSpread({width:c.width,height:c.height},c.top&&{top:c.top}),c.left&&{left:c.left})))}function e(t,o){return t.map(function(t){return e=t,n=o,r=document.createElement("div"),(t=r.classList).add.apply(t,["resizer"].concat(_toConsumableArray(Array.isArray(e)?e:e.split(" ")))),n.appendChild(r),r;var e,n,r})}var s=document.querySelector(".content-wrapper"),h=[],y=[{id:"mine",title:"Minecraft",items:[{type:"folder",title:"Бесплатные моды для майнкрафта",windowId:"test"},{type:"file",title:"Лучшая в мире игра",href:"/mine"}],itemsSort:function(t,e){return t.type<e.type}},{id:"toe",title:"Wantid",content:"\n                <h1>Да</h1>\n                <p>Согласен</p>\n            ".trim()}],m=1,u=!1,g=744<window.innerWidth,w=function(n){return function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Object.entries(t).forEach(function(t){var e=_slicedToArray(t,2),t=e[0],e=e[1];n.style[t]=e.toString()})}},b=w(document.body),v=function(t){return t.forEach(function(a){var t=a.querySelectorAll(".drag-target")||[a],c=w(a);a!==t[0]&&f(a,["mousedown","touchstart"],function(){c({zIndex:++m})}),t.forEach(function(i){f(i,["mousedown","touchstart"],function(t){var n,r,o,e;t.target.classList.contains("drag-target")&&(n=d(t),b({userSelect:"none"}),c({zIndex:++m}),t=window.getComputedStyle(a,null),r=parseInt(t.getPropertyValue("left"))||0,o=parseInt(t.getPropertyValue("top"))||0,e=function(t){u=!0;var e=d(t),t=e.pageX,e=e.pageY;c({left:r+t-n.pageX+"px",top:o+e-n.pageY+"px"})},f(document,["mousemove","touchmove"],e),f(document,["mouseup","touchend"],function(){l(document,["mousemove","touchmove"],e),b({userSelect:"auto"}),u=!1},{once:!0}),i.ondragstart=function(){return!1})})})})},A=function(t){return t.forEach(function(o){var i=w(o),t=document.createElement("div");o.appendChild(t);var t=e(["top","right","bottom","left","top left","top right","bottom left","bottom right"],t),a={},c={top:0,left:0},u={};t.forEach(function(t){function e(t){r.contains("top")&&function(t){t=d(t).pageY;i({height:u.height+(a.pageY-t)+"px"}),i(g?{top:t+"px"}:{top:c.top+(t-a.pageY)+"px"})}(t),r.contains("right")&&function(t){t=d(t).pageX;i({width:t-u.left+"px"})}(t),r.contains("bottom")&&function(t){t=d(t).pageY;i({height:t-u.top+"px"})}(t),r.contains("left")&&function(t){t=d(t).pageX;i({width:u.width+(a.pageX-t)+"px",left:t+"px"})}(t)}function n(){l(window,["mousemove","touchmove"],e)}var r=t.classList;f(t,["mousedown","touchstart"],function(t){a=d(t),u=o.getBoundingClientRect(),c={top:o.offsetTop,left:o.offsetLeft},f(window,["mousemove","touchmove"],e),f(window,["mouseup","touchend"],n)})})})},_=function(t){return t.forEach(function(n){var r=w(n);r(g?{top:"calc((100% - 70%) / 2)",left:"calc((100% - 70%) / 2)",width:"".concat(n.getBoundingClientRect().width,"px")}:{top:"calc((100% - 70%) / 2)",left:"calc((100% - 90%) / 2)",width:"90%",margin:0});var o=0,i=!1,a={};f(n,["mousedown"],function(){var t,e;2<=++o&&(r({transition:"left .1s, top .1s, width .1s, height .1s"}),i?(i=!1,r({width:"".concat(a.width,"px"),height:"".concat(a.height,"px"),left:"".concat(a.left,"px"),top:"".concat(a.top,"px")})):(t=(e=n.getBoundingClientRect()).width,e=e.height,a={width:t,height:e,top:n.offsetTop,left:n.offsetLeft},i=!0,r({width:"100%",height:"100%",left:0,top:0})),setTimeout(function(){return r({transition:"none"})},100)),setTimeout(function(){return o=0},200)})})},S=function(t){return t.forEach(function(t){var e=t.dataset.href;e&&f(t,["mouseup","touchend"],function(){u||(window.location.href=e)})})},T=function(t){return t.forEach(function(t){var e=t.dataset.windowId;e&&f(t,["mouseup","touchend"],function(){u||n(e)})})},t=document.querySelectorAll(".draggable"),r=document.querySelectorAll(".resizable"),o=document.querySelectorAll(".fullscreen"),i=document.querySelectorAll("[data-href]"),a=document.querySelectorAll("[data-window-id]");v(t),A(r),_(o),S(i),T(a)}();
